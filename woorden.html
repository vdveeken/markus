<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Woorden Oefenen</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  ul {
    list-style: none;
    padding-left: 0;
  }
  li {
    margin-bottom: 0.5em;
    font-size: 1.2em;
  }
  li.gevonden {
    background-color: #fff799;
    font-weight: bold;
    border-radius: 4px;
    padding: 0.1em 0.4em;
  }
  #gevondenWoorden li s {
    text-decoration: line-through;
    color: #555;
  }
  input {
    width: 1.2em;
    text-align: center;
    font-size: 1.2em;
  }
  input.correct {
    background-color: #ffff99;
  }
  button {
    margin-right: 0.5em;
    font-size: 1em;
  }
</style>
</head>
<body>

<header>
  <h1>üî§ Woordspel</h1>
  <nav><a href="index.html">Home</a></nav>
</header>

<main>
  <p>Vul de ontbrekende letters aan:</p>

  <form id="woordForm" onsubmit="return false;">
    <ul id="woordenlijst"></ul>
    <button type="button" onclick="controleer()">Controleer antwoorden</button>
    <button type="button" onclick="nieuweVragen()">Nieuwe vragen</button>
  </form>

  <h2>Gevonden woorden</h2>
  <ul id="gevondenWoorden"></ul>

  <div id="resultaat" style="margin-top: 1em; font-weight: bold;"></div>
</main>

<script>
  const woorden = [
    { woord: "hond", hint: "huisdier met poten", ontbreek: [1] },
    { woord: "boom", hint: "groeit in het bos", ontbreek: [1] },
    { woord: "vogel", hint: "vliegt in de lucht", ontbreek: [1, 3] },
    { woord: "mes", hint: "om mee te snijden", ontbreek: [1] },
    { woord: "school", hint: "gebouw met klaslokalen", ontbreek: [3] },
    { woord: "auto", hint: "vervoermiddel met 4 wielen", ontbreek: [0] },
    { woord: "groen", hint: "kleur van gras", ontbreek: [2] },
    { woord: "dier", hint: "dierentuin-dier", ontbreek: [0] },
    { woord: "klok", hint: "maakt lawaai als hij slaat", ontbreek: [2] },
    { woord: "fiets", hint: "twee wielen, trappen", ontbreek: [1] },
    { woord: "plant", hint: "groeit in een pot", ontbreek: [2] },
    { woord: "stoel", hint: "om op te zitten", ontbreek: [2] },
    { woord: "regen", hint: "valt uit de lucht", ontbreek: [2] },
    { woord: "kaars", hint: "geeft licht", ontbreek: [2] },
    { woord: "wolken", hint: "drijven in de lucht", ontbreek: [3] }
  ];

  let actieveWoorden = [];
  // Bijhouden welke woorden gevonden zijn
  let gevondenSet = new Set();

  function nieuweVragen() {
    const lijst = document.getElementById("woordenlijst");
    lijst.innerHTML = "";
    document.getElementById("resultaat").textContent = "";
    gevondenSet.clear();
    
    // Pak 10 willekeurige woorden uit de lijst
    actieveWoorden = woorden
      .sort(() => 0.5 - Math.random())
      .slice(0, 10);

    // Maak gevonden lijst opnieuw
    const gevondenLijst = document.getElementById("gevondenWoorden");
    gevondenLijst.innerHTML = "";
    actieveWoorden.forEach(item => {
      const li = document.createElement("li");
      li.textContent = item.woord;
      li.setAttribute("data-woord", item.woord);
      gevondenLijst.appendChild(li);
    });

    // Maak puzzel lijst met inputs
    actieveWoorden.forEach((item, index) => {
      const woordArray = item.woord.split('');
      item.ontbreek.forEach(i => {
        woordArray[i] = `<input type="text" maxlength="1" data-index="${index}" data-pos="${i}" />`;
      });
      const li = document.createElement('li');
      li.id = `woord-${index}`;
      li.innerHTML = `${woordArray.join('')} <em>(${item.hint})</em>`;
      lijst.appendChild(li);
    });
  }

  function controleer() {
    let allesGoed = true;
    const lijst = document.getElementById("woordenlijst");

    actieveWoorden.forEach((item, index) => {
      let woordIsGoed = true;

      // Check alle inputposities
      item.ontbreek.forEach(pos => {
        const input = document.querySelector(`input[data-index="${index}"][data-pos="${pos}"]`);
        if (!input) return;
        const letterJuist = item.woord[pos];
        const ingevuld = input.value.toLowerCase();

        if (ingevuld === letterJuist) {
          input.classList.add("correct");
          input.classList.remove("incorrect");
        } else {
          input.classList.remove("correct");
          input.classList.add("incorrect");
          woordIsGoed = false;
          allesGoed = false;
        }
      });

      const liPuzzel = document.getElementById(`woord-${index}`);
      const gevondenLijstItems = document.querySelectorAll(`#gevondenWoorden li[data-woord="${item.woord}"]`);

      if (woordIsGoed) {
        // Markeer woord gearceerd (blijvend!)
        liPuzzel.classList.add("gevonden");
        // Maak inputs disabled
        item.ontbreek.forEach(pos => {
          const input = document.querySelector(`input[data-index="${index}"][data-pos="${pos}"]`);
          if (input) input.disabled = true;
        });

        // Doorgestreept in gevonden lijst (blijvend!)
        gevondenLijstItems.forEach(li => {
          if (!gevondenSet.has(item.woord)) {
            li.innerHTML = `<s>${item.woord}</s>`;
            gevondenSet.add(item.woord);
          }
        });

      } else {
        // Als woord nog niet gevonden, laat input actief en arcering weg (maar niet terugtrekken van eerder gevonden woorden!)
        if (!gevondenSet.has(item.woord)) {
          liPuzzel.classList.remove("gevonden");
          item.ontbreek.forEach(pos => {
            const input = document.querySelector(`input[data-index="${index}"][data-pos="${pos}"]`);
            if (input) input.disabled = false;
          });
          gevondenLijstItems.forEach(li => {
            li.textContent = item.woord;
          });
        }
      }
    });

    // Resultaatmelding
    document.getElementById("resultaat").textContent = allesGoed
      ? "‚úÖ Alles goed ingevuld!"
      : "‚ùå Niet alles klopt. Probeer het nog eens.";
  }

  window.onload = nieuweVragen;
</script>

</body>
</html>
